---
title: L2-014 列车调度（25 分）
date: 2018-06-23 11:08:10
tags: PAT
categories: 题解集
---

L2-014 列车调度（25 分）
火车站的列车调度铁轨的结构如下图所示。

\ Figure

两端分别是一条入口（Entrance）轨道和一条出口（Exit）轨道，它们之间有N条平行的轨道。每趟列车从入口可以选择任意一条轨道进入，最后从出口离开。在图中有9趟列车，在入口处按照{8，4，2，5，3，9，1，6，7}的顺序排队等待进入。如果要求它们必须按序号递减的顺序从出口离开，则至少需要多少条平行铁轨用于调度？

输入格式：

输入第一行给出一个整数N (2 <= N <= 10^5^)，下一行给出从1到N的整数序号的一个重排列。数字间以空格分隔。

输出格式：

在一行中输出可以将输入的列车按序号递减的顺序调离所需要的最少的铁轨条数。

输入样例：

9
8 4 2 5 3 9 1 6 7
输出样例：

4

分析：求最少下降子序列数，即求最长上升子序列长度
关于 Dilworth定理：
Dilworth定理根据序列划分的最小数量的链描述了任何有限偏序集的宽度。
定理内容：
反链是一种偏序集，其任意两个元素不可比；而链则是一种任意两个元素可比的偏序集。Dilworth定理说明，存在一个反链A与一个将序列划分为链族P的划分，使得划分中链的数量等于集合A的基数。当存在这种情况时，对任何至多能包含来自P中每一个成员一个元素的反链，A一定是此序列中的最大反链。同样地，对于任何最少包含A中的每一个元素的一个链的划分，P也一定是序列可以划分出的最小链族。偏序集的宽度被定义为A与P的共同大小。
另一种Dilworth定理的等价表述是：在有穷偏序集中，任何反链最大元素数目等于任何将集合到链的划分中链的最小数目。一个关于无限偏序集的理论指出，在此种情况下，一个偏序集具有有限的宽度w，当且仅当它可以划分为最少w条链。
```cpp
#include<iostream>
#include<set>
#include<cstdio>
using namespace std;
int main()
{
    set<int> s;
    int n,d;
    scanf("%d",&n);
    while(n--){
        scanf("%d",&d);
        if(s.empty()){
            s.insert(d);
        }else{
            set<int>::iterator it;
            it = s.lower_bound(d);
            if(it==s.end()){
                s.insert(d);
            }else{
                s.erase(it);
                s.insert(d);
            }
        }
    }
    printf("%d",s.size());
    return 0;
}

```